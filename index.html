<!DOCTYPE html >  
<html>  
<head>  
<title>Exercise 5</title>  
<meta charset="UTF-8">
<script type="text/javascript" src="dist/web3.min.js"></script>
</head>  
<body>  
<p>DAPP Exercise</p>
<div>
    <div id="container">
        <h4>Current Ropsten height</h4>
        <button onclick="getHeight()">get height</button>
        <span id ="heightSpan"></span>
    </div>
    <div id="container2">
        <h4>Current Token Balance</h4>
        <button onclick="getTokenBalance()">get balance</button>
        <span id ="tokenBalanceSpan"></span>
    </div>
    <div id="container3">
        <button class="enableEthereumButton">Enable Ethereum</button>
        <h2>Account: <span class="showAccount"></span></h2>
    </div>
</div>
<script  type="text/javascript">
    let web3 = new Web3(Web3.givenProvider || "ws://localhost:8545");
    if (typeof window.ethereum !== 'undefined') {
        console.log('MetaMask is installed!');
    }

    function getHeight(){
        let curHeight = web3.eth.getBlockNumber();
        document.getElementById("heightSpan").innerText = curHeight;
    }

    function getTokenBalance(){

        document.getElementById("tokenBalanceSpan").innerText = curHeight;
    }

    //get meta mask input
    const ethereumButton = document.querySelector('.enableEthereumButton');
    const showAccount = document.querySelector('.showAccount');

    ethereumButton.addEventListener('click', () => {
        getAccount();
    });

    async function getAccount() {
        const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
        const account = accounts[0];
        showAccount.innerHTML = account;
    }


</script>  
</body>  
</html> 